# 005 - ì±„íŒ… UI ê°œì„  ì„¤ê³„

## ê°œìš”

Replitì˜ ì±„íŒ… UIë¥¼ ì°¸ê³ í•˜ì—¬ ClaudeShipì˜ ì±„íŒ… UIë¥¼ ê°œì„ í•©ë‹ˆë‹¤.

## í˜„ì¬ ìƒíƒœ ë¶„ì„

### ClaudeShip í˜„ì¬ UI
- ì „í†µì ì¸ ì±„íŒ… ë²„ë¸” í˜•íƒœ (User/AI ì•„ë°”íƒ€)
- ë„êµ¬ ì‚¬ìš©ì€ ë°°ì§€/íƒœê·¸ í˜•íƒœë¡œ í‘œì‹œ
- ìŠ¤íŠ¸ë¦¬ë° ì¤‘ ë„êµ¬ ì‹¤í–‰ ìƒíƒœ í‘œì‹œ
- ë§ˆí¬ë‹¤ìš´ ë Œë”ë§
- ì§ˆë¬¸ ì‘ë‹µ ë¸”ë¡ (AskUserQuestionBlock)

### Replit UI íŠ¹ì§•
- íƒ€ì„ë¼ì¸/ìŠ¤í… í˜•íƒœì˜ ì§„í–‰ ìƒí™© í‘œì‹œ
- ì ‘ê¸°/í¼ì¹˜ê¸° ê¸°ëŠ¥ ("Show 10 more")
- ì˜ì‚¬ê²°ì • í‘œì‹œ ("Decided on...")
- ì‘ì—… ì†Œìš” ì‹œê°„ í‘œì‹œ ("8 seconds")
- Queue ì„¹ì…˜ (ëŒ€ê¸° ì‘ì—… ë¯¸ë¦¬ë³´ê¸°)
- ì§„í–‰ ì €ì¥ ìƒíƒœ í‘œì‹œ

## ë¬¸ì œì 

| ë¬¸ì œ | í˜„ì¬ ìƒíƒœ | Replit |
|------|----------|--------|
| ì •ë³´ ë°€ë„ | ì±„íŒ… ë²„ë¸”ì´ ê³µê°„ ë§ì´ ì°¨ì§€ | ìŠ¤í…ë³„ ì••ì¶• í‘œì‹œ |
| ì ‘ê¸°/í¼ì¹˜ê¸° | âŒ ì—†ìŒ | âœ… "Show 10 more" |
| ì˜ì‚¬ê²°ì • í‘œì‹œ | âŒ AI ê²°ì •ì´ ëª…ì‹œì ì´ì§€ ì•ŠìŒ | âœ… "Decided on..." |
| ì†Œìš” ì‹œê°„ | âŒ ì—†ìŒ | âœ… ê° ì‘ì—…ë³„ ì‹œê°„ |
| Queue | ìˆ«ìë§Œ í‘œì‹œ | ë‚´ìš© ë¯¸ë¦¬ë³´ê¸° ê°€ëŠ¥ |

## ê°œì„  ë°©ì•ˆ

### 1. íƒ€ì„ë¼ì¸ ë·° ì „í™˜

í˜„ì¬ ì±„íŒ… ë²„ë¸” í˜•íƒœë¥¼ íƒ€ì„ë¼ì¸ í˜•íƒœë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

```mermaid
flowchart TD
    subgraph í˜„ì¬
        A1[User ë²„ë¸”] --> A2[AI ë²„ë¸”]
        A2 --> A3[ë„êµ¬ ë°°ì§€ë“¤]
        A3 --> A4[ì‘ë‹µ í…ìŠ¤íŠ¸]
    end

    subgraph ê°œì„ 
        B1[User ë©”ì‹œì§€] --> B2[ì§„í–‰ ì €ì¥ í‘œì‹œ]
        B2 --> B3[ë„êµ¬ ì‹¤í–‰ ìŠ¤í… 1]
        B3 --> B4[ë„êµ¬ ì‹¤í–‰ ìŠ¤í… 2]
        B4 --> B5[ì˜ì‚¬ê²°ì • ë¸”ë¡]
        B5 --> B6[ì‘ë‹µ í…ìŠ¤íŠ¸]
    end
```

### 2. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```mermaid
classDiagram
    class ChatPanel {
        +messages
        +streamingBlocks
        +messageQueue
    }

    class TimelineMessage {
        +blocks: TimelineBlock[]
        +isCollapsed: boolean
        +toggle()
    }

    class TimelineBlock {
        <<interface>>
        +type: string
        +timestamp: Date
        +duration?: number
    }

    class ToolExecutionBlock {
        +toolName: string
        +input: object
        +status: string
        +duration: number
    }

    class DecisionBlock {
        +title: string
        +description: string
    }

    class TextBlock {
        +content: string
    }

    class QueuePreview {
        +items: QueueItem[]
        +onExecute()
        +onDelete()
    }

    ChatPanel --> TimelineMessage
    ChatPanel --> QueuePreview
    TimelineMessage --> TimelineBlock
    TimelineBlock <|-- ToolExecutionBlock
    TimelineBlock <|-- DecisionBlock
    TimelineBlock <|-- TextBlock
```

### 3. ìƒˆë¡œìš´ UI ìš”ì†Œ

#### 3.1 ë„êµ¬ ì‹¤í–‰ ìŠ¤í…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ íŒŒì¼ ì½ê¸°  layout.tsx                    (0.3s)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âŸ³ ëª…ë ¹ì–´ ì‹¤í–‰  pnpm build                  (ì§„í–‰ì¤‘) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš™ Decided on component structure           (2.1s)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2 ì ‘ê¸°/í¼ì¹˜ê¸°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ íŒŒì¼ ì½ê¸°  package.json                  (0.2s)  â”‚
â”‚ âœ“ íŒŒì¼ ì½ê¸°  tsconfig.json                 (0.1s)  â”‚
â”‚                                                     â”‚
â”‚ â†• Show 8 more                                       â”‚
â”‚                                                     â”‚
â”‚ âœ“ íŒŒì¼ ìˆ˜ì •  App.tsx                       (0.4s)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3 Queue ë¯¸ë¦¬ë³´ê¸°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–¼ Queue (2)                                    ğŸ—‘   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ ë°°ì¹˜ê°€ ì´ë ‡ê²Œ ë˜ë©´ ë³´ê¸°ê°€ í˜ë“¤ì–´ ë³´ì—¬...    â”‚ Nextâ”‚
â”‚ â”‚ ğŸ“ 1                                        â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ì‘ì„±í•´ì¤˜                      â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. ë°ì´í„° êµ¬ì¡° ë³€ê²½

#### 4.1 StreamingBlock í™•ì¥

```typescript
interface StreamingBlock {
  id: string;
  type: "text" | "tool_use" | "decision" | "progress_save";
  timestamp: Date;
  duration?: number; // milliseconds

  // ê¸°ì¡´ í•„ë“œ
  content?: string;
  tool?: { name: string; input: object };
  status?: "running" | "completed" | "error";

  // ìƒˆë¡œìš´ í•„ë“œ
  decision?: {
    title: string;
    description?: string;
  };
}
```

#### 4.2 Queue ì•„ì´í…œ êµ¬ì¡°

```typescript
interface QueueItem {
  id: string;
  content: string;
  attachments?: number;
  createdAt: Date;
}
```

### 5. êµ¬í˜„ ìš°ì„ ìˆœìœ„

| ìš°ì„ ìˆœìœ„ | ê¸°ëŠ¥ | ë‚œì´ë„ | ì˜í–¥ë„ |
|---------|------|--------|--------|
| 1 | ì ‘ê¸°/í¼ì¹˜ê¸° ê¸°ëŠ¥ | ë‚®ìŒ | ë†’ìŒ |
| 2 | ì†Œìš” ì‹œê°„ í‘œì‹œ | ë‚®ìŒ | ì¤‘ê°„ |
| 3 | Queue ë¯¸ë¦¬ë³´ê¸° | ì¤‘ê°„ | ë†’ìŒ |
| 4 | íƒ€ì„ë¼ì¸ ë·° ì „í™˜ | ë†’ìŒ | ë†’ìŒ |
| 5 | ì˜ì‚¬ê²°ì • ë¸”ë¡ | ì¤‘ê°„ | ì¤‘ê°„ |

## êµ¬í˜„ ê³„íš

### Phase 1: ê¸°ë³¸ ê°œì„  (ì ‘ê¸°/í¼ì¹˜ê¸° + ì‹œê°„ í‘œì‹œ)
- [ ] StreamingBlockì— timestamp, duration í•„ë“œ ì¶”ê°€
- [ ] ë°±ì—”ë“œì—ì„œ ë„êµ¬ ì‹¤í–‰ ì‹œê°„ ì¸¡ì • ë° ì „ì†¡
- [ ] ToolUseBlockì— ì†Œìš” ì‹œê°„ í‘œì‹œ ì¶”ê°€
- [ ] ë„êµ¬ ì‹¤í–‰ 10ê°œ ì´ìƒ ì‹œ ì ‘ê¸°/í¼ì¹˜ê¸° UI ì¶”ê°€

### Phase 2: Queue ê°œì„ 
- [ ] QueuePreview ì»´í¬ë„ŒíŠ¸ ìƒì„±
- [ ] MessageInput í•˜ë‹¨ì— Queue ì„¹ì…˜ ì¶”ê°€
- [ ] Queue ì•„ì´í…œ ì‚­ì œ/ì‹¤í–‰ ê¸°ëŠ¥

### Phase 3: íƒ€ì„ë¼ì¸ ë·° (ì„ íƒ)
- [ ] TimelineMessage ì»´í¬ë„ŒíŠ¸ ìƒì„±
- [ ] ê¸°ì¡´ MessageItemì„ TimelineMessageë¡œ ì ì§„ì  êµì²´
- [ ] ì˜ì‚¬ê²°ì • ë¸”ë¡ UI ì¶”ê°€

## íŒŒì¼ ë³€ê²½ ëª©ë¡

### í”„ë¡ íŠ¸ì—”ë“œ
- `apps/web/src/components/chat/StreamingMessage.tsx` - ì‹œê°„ í‘œì‹œ, ì ‘ê¸°/í¼ì¹˜ê¸°
- `apps/web/src/components/chat/MessageInput.tsx` - Queue ë¯¸ë¦¬ë³´ê¸°
- `apps/web/src/components/chat/QueuePreview.tsx` - ìƒˆ ì»´í¬ë„ŒíŠ¸
- `apps/web/src/stores/useChatStore.ts` - Queue ìƒíƒœ ê´€ë¦¬

### ë°±ì—”ë“œ
- `apps/server/src/chat/chat.service.ts` - ë„êµ¬ ì‹¤í–‰ ì‹œê°„ ì¸¡ì •

## ì°¸ê³  ìë£Œ

- Replit ì±„íŒ… UI ìŠ¤í¬ë¦°ìƒ· (`replit.png`)
- í˜„ì¬ ì»´í¬ë„ŒíŠ¸: `StreamingMessage.tsx`, `MessageItem.tsx`
